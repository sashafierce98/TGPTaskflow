{"ast":null,"code":"import{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import{Clock,LogOut}from\"lucide-react\";import{Button}from\"components/ui/button\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BACKEND_URL=process.env.REACT_APP_BACKEND_URL;export default function PendingApproval(){const navigate=useNavigate();const[user,setUser]=useState(null);useEffect(()=>{const fetchUser=async()=>{try{const response=await axios.get(\"\".concat(BACKEND_URL,\"/api/auth/me\"),{withCredentials:true});setUser(response.data);// If approved, redirect to dashboard\nif(response.data.approved){navigate(\"/dashboard\");}}catch(error){navigate(\"/\");}};fetchUser();},[navigate]);const handleLogout=async()=>{try{await axios.post(\"\".concat(BACKEND_URL,\"/api/auth/logout\"),{},{withCredentials:true});navigate(\"/\");}catch(error){console.error(\"Logout error:\",error);navigate(\"/\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-[#F8FAFC] flex items-center justify-center p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-md w-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg border border-[#E2E8F0] p-8 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-[#F59E0B]/10 rounded-full flex items-center justify-center mx-auto mb-6\",children:/*#__PURE__*/_jsx(Clock,{className:\"w-8 h-8 text-[#F59E0B]\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-[#1E293B] mb-2\",style:{fontFamily:'Manrope'},children:\"Approval Pending\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[#475569] mb-6\",children:\"Your account is waiting for admin approval. You'll be able to access TGP Bioplastics Kanban Board once an administrator approves your account.\"}),user&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[#F8FAFC] rounded-lg p-4 mb-6 text-left\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-[#64748B] mb-1\",children:\"Signed in as:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"img\",{src:user.picture||\"https://ui-avatars.com/api/?name=\".concat(encodeURIComponent(user.name)),alt:user.name,className:\"w-10 h-10 rounded-full\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-[#1E293B]\",children:user.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-[#64748B]\",children:user.email})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-[#FEF3C7] border border-[#F59E0B] rounded-lg p-4 mb-6\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-[#92400E]\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"What to do:\"}),\" Contact your TGP Bioplastics administrator to approve your account.\"]})}),/*#__PURE__*/_jsxs(Button,{onClick:handleLogout,variant:\"outline\",className:\"w-full\",\"data-testid\":\"logout-button\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-4 h-4 mr-2\"}),\"Sign Out\"]})]})})});}","map":{"version":3,"names":["useEffect","useState","useNavigate","axios","Clock","LogOut","Button","jsx","_jsx","jsxs","_jsxs","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","PendingApproval","navigate","user","setUser","fetchUser","response","get","concat","withCredentials","data","approved","error","handleLogout","post","console","className","children","style","fontFamily","src","picture","encodeURIComponent","name","alt","email","onClick","variant"],"sources":["/Users/mrinmayee/TGPTaskflow/frontend/src/pages/PendingApproval.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { Clock, LogOut } from \"lucide-react\";\nimport { Button } from \"components/ui/button\";\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\n\nexport default function PendingApproval() {\n  const navigate = useNavigate();\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      try {\n        const response = await axios.get(`${BACKEND_URL}/api/auth/me`, {\n          withCredentials: true\n        });\n        setUser(response.data);\n        \n        // If approved, redirect to dashboard\n        if (response.data.approved) {\n          navigate(\"/dashboard\");\n        }\n      } catch (error) {\n        navigate(\"/\");\n      }\n    };\n\n    fetchUser();\n  }, [navigate]);\n\n  const handleLogout = async () => {\n    try {\n      await axios.post(`${BACKEND_URL}/api/auth/logout`, {}, { withCredentials: true });\n      navigate(\"/\");\n    } catch (error) {\n      console.error(\"Logout error:\", error);\n      navigate(\"/\");\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-[#F8FAFC] flex items-center justify-center p-6\">\n      <div className=\"max-w-md w-full\">\n        <div className=\"bg-white rounded-lg border border-[#E2E8F0] p-8 text-center\">\n          <div className=\"w-16 h-16 bg-[#F59E0B]/10 rounded-full flex items-center justify-center mx-auto mb-6\">\n            <Clock className=\"w-8 h-8 text-[#F59E0B]\" />\n          </div>\n\n          <h1 className=\"text-2xl font-bold text-[#1E293B] mb-2\" style={{ fontFamily: 'Manrope' }}>\n            Approval Pending\n          </h1>\n          \n          <p className=\"text-[#475569] mb-6\">\n            Your account is waiting for admin approval. You'll be able to access TGP Bioplastics Kanban Board once an administrator approves your account.\n          </p>\n\n          {user && (\n            <div className=\"bg-[#F8FAFC] rounded-lg p-4 mb-6 text-left\">\n              <p className=\"text-sm text-[#64748B] mb-1\">Signed in as:</p>\n              <div className=\"flex items-center gap-3\">\n                <img\n                  src={user.picture || `https://ui-avatars.com/api/?name=${encodeURIComponent(user.name)}`}\n                  alt={user.name}\n                  className=\"w-10 h-10 rounded-full\"\n                />\n                <div>\n                  <p className=\"font-medium text-[#1E293B]\">{user.name}</p>\n                  <p className=\"text-sm text-[#64748B]\">{user.email}</p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          <div className=\"bg-[#FEF3C7] border border-[#F59E0B] rounded-lg p-4 mb-6\">\n            <p className=\"text-sm text-[#92400E]\">\n              <strong>What to do:</strong> Contact your TGP Bioplastics administrator to approve your account.\n            </p>\n          </div>\n\n          <Button\n            onClick={handleLogout}\n            variant=\"outline\"\n            className=\"w-full\"\n            data-testid=\"logout-button\"\n          >\n            <LogOut className=\"w-4 h-4 mr-2\" />\n            Sign Out\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}